var ut=Object.defineProperty;var at=(t,e,n)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>at(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function T(){}function st(t){return t()}function Z(){return Object.create(null)}function V(t){t.forEach(st)}function it(t){return typeof t=="function"}function dt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ht(t){return Object.keys(t).length===0}function s(t,e){t.appendChild(e)}function ct(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function gt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function K(t){return document.createTextNode(t)}function $(){return K(" ")}function z(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mt(t){return Array.from(t.childNodes)}function tt(t,e){e=""+e,t.data!==e&&(t.data=e)}function et(t,e){t.value=e??""}let J;function I(t){J=t}const R=[],D=[];let B=[];const nt=[],pt=Promise.resolve();let U=!1;function _t(){U||(U=!0,pt.then(ft))}function W(t){B.push(t)}const q=new Set;let F=0;function ft(){if(F!==0)return;const t=J;do{try{for(;F<R.length;){const e=R[F];F++,I(e),vt(e.$$)}}catch(e){throw R.length=0,F=0,e}for(I(null),R.length=0,F=0;D.length;)D.pop()();for(let e=0;e<B.length;e+=1){const n=B[e];q.has(n)||(q.add(n),n())}B.length=0}while(R.length);for(;nt.length;)nt.pop()();U=!1,q.clear(),I(t)}function vt(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}function yt(t){const e=[],n=[];B.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),B=e}const bt=new Set;function $t(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function ot(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function jt(t,e,n){const{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),W(()=>{const l=t.$$.on_mount.map(st).filter(it);t.$$.on_destroy?t.$$.on_destroy.push(...l):V(l),t.$$.on_mount=[]}),r.forEach(W)}function wt(t,e){const n=t.$$;n.fragment!==null&&(yt(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(R.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Et(t,e,n,o,r,l,f=null,y=[-1]){const d=J;I(t);const c=t.$$={fragment:null,ctx:[],props:l,update:T,not_equal:r,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Z(),dirty:y,skip_bound:!1,root:e.target||d.$$.root};f&&f(c.root);let _=!1;if(c.ctx=n?n(t,e.props||{},(g,b,...m)=>{const i=m.length?m[0]:b;return c.ctx&&r(c.ctx[g],c.ctx[g]=i)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](i),_&&Ct(t,g)),b}):[],c.update(),_=!0,V(c.before_update),c.fragment=o?o(c.ctx):!1,e.target){if(e.hydrate){const g=mt(e.target);c.fragment&&c.fragment.l(g),g.forEach(G)}else c.fragment&&c.fragment.c();e.intro&&$t(t.$$.fragment),jt(t,e.target,e.anchor),ft()}I(d)}class Nt{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){wt(this,1),this.$destroy=T}$on(e,n){if(!it(n))return T;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!ht(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pt);function kt(t){const e=(o,r)=>o?e(o==null?void 0:o.previousElementSibling,r||o.localName)+ +(o.localName==r):1,n=o=>!o||o.nodeType!==1?[""]:o.id&&document.getElementById(o.id)===o?[`id("${o.id}")`]:[...n(o.parentNode),`${o.localName.toLowerCase()}[${e(o)}]`];return n(t).join("/")}function xt({x:t,y:e}){const n=document.caretPositionFromPoint(t,e);return{offsetNode:n==null?void 0:n.offsetNode,offset:(n==null?void 0:n.offset)??0}}function St({x:t,y:e}){const n=document.caretRangeFromPoint(t,e);return{offsetNode:n==null?void 0:n.startContainer,offset:(n==null?void 0:n.startOffset)??0}}function Lt({x:t,y:e}){return"caretPositionFromPoint"in document?xt({x:t,y:e}):St({x:t,y:e})}function Mt(t){for(var e=5381,n=0;n<t.length;n++)e=(e<<5)+e+t.charCodeAt(n);return e}function Ot(t){var e=Mt(t),n=(e&16711680)>>16,o=(e&65280)>>8,r=e&255;return"#"+("0"+n.toString(16)).substr(-2)+("0"+o.toString(16)).substr(-2)+("0"+r.toString(16)).substr(-2)}function rt(t,e,n){const o=t.slice();return o[11]=e[n],o}function lt(t){let e,n,o,r=t[11].offsetNode.toString()+"",l,f,y=t[11].offset+"",d,c,_,g;function b(){return t[8](t[11])}return{c(){e=a("div"),n=a("button"),n.textContent="log",o=$(),l=K(r),f=$(),d=K(y),c=$()},m(m,i){ct(m,e,i),s(e,n),s(e,o),s(e,l),s(e,f),s(e,d),s(e,c),_||(g=z(n,"click",b),_=!0)},p(m,i){t=m,i&4&&r!==(r=t[11].offsetNode.toString()+"")&&tt(l,r),i&4&&y!==(y=t[11].offset+"")&&tt(d,y)},d(m){m&&G(e),_=!1,g()}}}function At(t){let e,n,o,r,l,f,y,d,c,_,g,b,m,i,w,x,j,S,H,C,E,X,N,L,P,k,M,O=ot(t[2]),p=[];for(let u=0;u<O.length;u+=1)p[u]=lt(rt(t,O,u));return{c(){e=a("main"),n=a("h1"),n.textContent="CaretPositionHitmapViewer",o=$(),r=a("div"),l=a("div"),f=a("h2"),f.textContent="Dom Editor",y=$(),d=a("textarea"),c=$(),_=a("button"),_.textContent="visualize",g=$(),b=a("div"),m=a("h2"),m.textContent="Log",i=$(),w=a("div");for(let u=0;u<p.length;u+=1)p[u].c();x=$(),j=a("div"),S=a("h2"),S.textContent="Result",H=$(),C=a("div"),E=a("div"),X=$(),N=a("canvas"),L=$(),P=a("address"),P.innerHTML='<a href="https://github.com/Coreight98" target="_blank" rel="noopener noreferrer">Coregit98</a> <a href="https://github.com/Coreight98/caretPositionHitmapViewer" target="_blank" rel="noopener noreferrer">Demo Repository</a>',v(n,"class","title svelte-jjl9yo"),v(f,"class","svelte-jjl9yo"),v(d,"class","dom_textarea svelte-jjl9yo"),v(_,"class","visualize_button svelte-jjl9yo"),v(m,"class","svelte-jjl9yo"),v(w,"class","log_info svelte-jjl9yo"),v(r,"class","left_block svelte-jjl9yo"),v(S,"class","svelte-jjl9yo"),v(E,"class","dom_block svelte-jjl9yo"),v(N,"class","render_area svelte-jjl9yo"),v(C,"class","result_block svelte-jjl9yo"),v(j,"class","right_block svelte-jjl9yo"),v(P,"class","svelte-jjl9yo"),v(e,"class","ma1n svelte-jjl9yo")},m(u,A){ct(u,e,A),s(e,n),s(e,o),s(e,r),s(r,l),s(l,f),s(l,y),s(l,d),et(d,t[3]),s(r,c),s(r,_),s(r,g),s(r,b),s(b,m),s(b,i),s(b,w);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(w,null);s(e,x),s(e,j),s(j,S),s(j,H),s(j,C),s(C,E),E.innerHTML=t[3],t[9](E),s(C,X),s(C,N),t[10](N),s(e,L),s(e,P),k||(M=[z(window,"mousedown",t[6]),z(d,"input",t[7]),z(_,"click",t[5])],k=!0)},p(u,[A]){if(A&8&&et(d,u[3]),A&4){O=ot(u[2]);let h;for(h=0;h<O.length;h+=1){const Q=rt(u,O,h);p[h]?p[h].p(Q,A):(p[h]=lt(Q),p[h].c(),p[h].m(w,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=O.length}A&8&&(E.innerHTML=u[3])},i:T,o:T,d(u){u&&G(e),gt(p,u),t[9](null),t[10](null),k=!1,V(M)}}}function Ft(t,e,n){let o,r,l=new Map,f=[],y="";const d=()=>{const i=r.getContext("2d");if(!i)return;const{x:w,y:x,width:j,height:S}=o.getBoundingClientRect(),[H,C,E,X]=[Math.trunc(j),Math.trunc(S),Math.trunc(w),Math.trunc(x)];i.canvas.width=H,i.canvas.height=C,Array.from({length:H},(N,L)=>L+E).forEach((N,L)=>{Array.from({length:C},(P,k)=>k+X).forEach((P,k)=>{const M=Lt({x:N,y:P});i.fillStyle=Ot(M.offset+kt(M.offsetNode)),i.fillRect(L,k,1,1),l.set(`${N}-${P}`,M)})})},c=i=>{const[w,x]=[Math.trunc(i.pageX),Math.trunc(i.pageY)],j=l.get(`${w}-${x}`);j&&n(2,f=[j,...f])};function _(){y=this.value,n(3,y)}const g=i=>console.info(i);function b(i){D[i?"unshift":"push"](()=>{o=i,n(0,o)})}function m(i){D[i?"unshift":"push"](()=>{r=i,n(1,r)})}return[o,r,f,y,l,d,c,_,g,b,m]}class Rt extends Nt{constructor(e){super(),Et(this,e,Ft,At,dt,{})}}new Rt({target:document.getElementById("app")});
